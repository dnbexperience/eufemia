"use strict";(self.webpackChunkdnb_design_system_portal=self.webpackChunkdnb_design_system_portal||[]).push([[94434],{84196:function(e,n,o){o.r(n);var t=o(31085),i=o(71184);function r(e){const n=Object.assign({h2:"h2",pre:"pre",code:"code",p:"p",ul:"ul",li:"li",a:"a",h3:"h3",ol:"ol",strong:"strong"},(0,i.R)(),e.components);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{children:"Import"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { Form } from '@dnb/eufemia/extensions/forms'\nrender(<Form.Section />)\n"})}),"\n",(0,t.jsx)(n.h2,{children:"Description"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"Form.Section"})," lets you compose together sections of fields and values to be reused in different contexts."]}),"\n",(0,t.jsx)(n.h2,{children:"Relevant links"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/dnbexperience/eufemia/tree/main/packages/dnb-eufemia/src/extensions/forms/Form/Section",children:"Source code"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://github.com/dnbexperience/eufemia/tree/main/packages/dnb-design-system-portal/src/docs/uilib/extensions/forms/Form/Section",children:"Docs code"})}),"\n"]}),"\n",(0,t.jsx)(n.h3,{children:"Good to know"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["It allows you to easily customize and reposition nested ",(0,t.jsx)(n.code,{children:"Form.Section"})," components within the data context, making it effortless to reuse the same set of fields and values in various contexts. Check out the ",(0,t.jsx)(n.code,{children:"overwriteProps"})," and ",(0,t.jsx)(n.code,{children:"path"})," properties for more information."]}),"\n",(0,t.jsxs)(n.li,{children:["When defining a default value for a field or value, you can use the ",(0,t.jsx)(n.code,{children:"defaultValue"})," property instead of ",(0,t.jsx)(n.code,{children:"value"}),". It will not take precedence over the data context like ",(0,t.jsx)(n.code,{children:"value"})," does."]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.a,{href:"/uilib/extensions/forms/Form/Visibility/",children:"Form.Visibility"})," to handle logic and hide parts of your form based on the data context."]}),"\n",(0,t.jsxs)(n.li,{children:["To provide localization for all used texts defined in the ",(0,t.jsx)(n.code,{children:"translations"})," property of the section, you can create a localization easily."]}),"\n",(0,t.jsx)(n.li,{children:"Only imported sections with their localizations are included in the production bundle."}),"\n",(0,t.jsxs)(n.li,{children:["It is possible to overwrite the translations later by using the ",(0,t.jsx)(n.code,{children:"Form.Handler"})," component."]}),"\n",(0,t.jsxs)(n.li,{children:["A single section can be used without ",(0,t.jsx)(n.code,{children:"Form.Handler"}),", just like any other field and value."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/uilib/extensions/forms/Form/Section/EditContainer/",children:"Form.Section.EditContainer"})," and ",(0,t.jsx)(n.a,{href:"/uilib/extensions/forms/Form/Section/ViewContainer/",children:"Form.Section.ViewContainer"})," containers are available to use."]}),"\n",(0,t.jsxs)(n.li,{children:["Here is a ",(0,t.jsx)(n.a,{href:"/uilib/extensions/forms/blocks/",children:"list of blocks"})," ready to use."]}),"\n",(0,t.jsxs)(n.li,{children:["You can use ",(0,t.jsx)(n.code,{children:"//"})," at the start of a field path to access data from the root of the form data context, bypassing the section path. For example, ",(0,t.jsx)(n.code,{children:'path="//rootField"'})," inside a section at ",(0,t.jsx)(n.code,{children:"/section"})," will access ",(0,t.jsx)(n.code,{children:"/rootField"})," instead of ",(0,t.jsx)(n.code,{children:"/section/rootField"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{children:"Usage"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Create the section component and export it:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'import { Form, Field } from \'@dnb/eufemia/extensions/forms\'\n\nexport function MySection(props) {\n  return (\n    <Form.Section {...props}>\n      {/* Fields*/}\n      <Field.PhoneNumber path="/phoneNumber" required />\n\n      {/* Views*/}\n      <View.PhoneNumber path="/phoneNumber" />\n    </Form.Section>\n  )\n}\n'})}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsx)(n.li,{children:"Import the section component and use it in a form:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { Form } from '@dnb/eufemia/extensions/forms'\nimport { MySection } from './form-sections'\n\nfunction MyForm() {\n  return (\n    <Form.Handler>\n      <MySection />\n    </Form.Handler>\n  )\n}\n"})}),"\n",(0,t.jsx)(n.h2,{children:"Overwrite properties"}),"\n",(0,t.jsxs)(n.p,{children:["It lets you overwrite all of the given properties if needed by using ",(0,t.jsx)(n.code,{children:"overwriteProps"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { Form, Field } from '@dnb/eufemia/extensions/forms'\n\nconst MySection = (props) => {\n  return (\n    <Form.Section {...props}>\n      <Field.Name.First path=\"/firstName\" />\n      <Field.Name.Last path=\"/lastName\" required minLength={2} />\n    </Form.Section>\n  )\n}\n\nrender(\n  <Form.Handler>\n    <MySection\n      overwriteProps={{\n        firstName: { label: '/Custom label' },\n        lastName: { required: false, minLength: 0 },\n      }}\n    />\n  </Form.Handler>,\n)\n"})}),"\n",(0,t.jsxs)(n.h2,{children:["Optional ",(0,t.jsx)(n.code,{children:"path"})," support"]}),"\n",(0,t.jsxs)(n.p,{children:["You can optionally define a ",(0,t.jsx)(n.code,{children:"path"})," for the section component. Fields inside the section will use this path as a prefix for their own path. This makes it possible to reuse the same section component in different contexts."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'import { Form, Field } from \'@dnb/eufemia/extensions/forms\'\n\nconst MySection = (props) => {\n  return (\n    <Form.Section {...props}>\n      <Field.Name.First path="/firstName" />\n      <Field.Name.Last path="/lastName" />\n    </Form.Section>\n  )\n}\n\nrender(\n  <Form.Handler\n    defaultData={{\n      // MySection has a path="/nestedPath" and therefore it is nested in the data context\n      nestedPath: {\n        firstName: \'Nora\',\n      },\n    }}\n  >\n    <MySection path="/nestedPath" />\n  </Form.Handler>,\n)\n'})}),"\n",(0,t.jsxs)(n.h3,{children:["Accessing root data with ",(0,t.jsx)(n.code,{children:"//"})]}),"\n",(0,t.jsxs)(n.p,{children:["When a field is inside a ",(0,t.jsx)(n.code,{children:"Form.Section"}),", you can use a path starting with ",(0,t.jsx)(n.code,{children:"//"})," to access data from the root of the form data context, bypassing the section path. This is useful when you need to reference data outside the current section."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { Form, Field } from '@dnb/eufemia/extensions/forms'\n\nconst MySection = (props) => {\n  return (\n    <Form.Section {...props}>\n      {/* This field accesses data at /sectionField relative to the section */}\n      <Field.String path=\"/sectionField\" />\n\n      {/* This field accesses data at /rootField from the root, ignoring the section path */}\n      <Field.String path=\"//rootField\" />\n\n      {/* You can also access nested root paths */}\n      <Field.String path=\"//user/profile/name\" />\n    </Form.Section>\n  )\n}\n\nrender(\n  <Form.Handler\n    defaultData={{\n      rootField: 'Root value',\n      user: {\n        profile: {\n          name: 'John Doe',\n        },\n      },\n      section: {\n        sectionField: 'Section value',\n      },\n    }}\n  >\n    <MySection path=\"/section\" />\n  </Form.Handler>,\n)\n"})}),"\n",(0,t.jsx)(n.p,{children:"In the example above:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The field with ",(0,t.jsx)(n.code,{children:'path="/sectionField"'})," will access ",(0,t.jsx)(n.code,{children:"/section/sectionField"})]}),"\n",(0,t.jsxs)(n.li,{children:["The field with ",(0,t.jsx)(n.code,{children:'path="//rootField"'})," will access ",(0,t.jsx)(n.code,{children:"/rootField"})," (root level)"]}),"\n",(0,t.jsxs)(n.li,{children:["The field with ",(0,t.jsx)(n.code,{children:'path="//user/profile/name"'})," will access ",(0,t.jsx)(n.code,{children:"/user/profile/name"})," (root level)"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["This feature works even with nested sections - ",(0,t.jsx)(n.code,{children:"//"})," always refers to the root of the form data context."]}),"\n",(0,t.jsxs)(n.p,{children:["If you want every field inside a nested ",(0,t.jsx)(n.code,{children:"Form.Section"})," to bypass the parent path, set the section ",(0,t.jsx)(n.code,{children:"path"})," to start with ",(0,t.jsx)(n.code,{children:"//"})," as well (for example ",(0,t.jsx)(n.code,{children:'path="//global"'})," or ",(0,t.jsx)(n.code,{children:'path="//"'}),"). This works like protocol-relative URLs in HTML and resets the section context back to the root."]}),"\n",(0,t.jsx)(n.h2,{children:"Required property"}),"\n",(0,t.jsxs)(n.p,{children:["You can optionally define a ",(0,t.jsx)(n.code,{children:"required"})," property for the section component. Fields inside the section will then be required."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'render(\n  <Form.Section required={true}>\n    <Field.Name.First path="/firstName" />\n    <Field.Name.Last path="/lastName" />\n  </Form.Section>,\n)\n'})}),"\n",(0,t.jsx)(n.h2,{children:"TypeScript support"}),"\n",(0,t.jsx)(n.p,{children:"You can optionally define which properties the nested fields should accept:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { Form, Field, SectionProps } from '@dnb/eufemia/extensions/forms'\nimport type { Props as PhoneNumberProps } from '@dnb/eufemia/extensions/forms/Field/PhoneNumber'\n\nconst MySection = (\n  props: SectionProps<{ phoneNumber?: PhoneNumberProps }>,\n) => {\n  return (\n    <Form.Section {...props}>\n      <Field.Name.Last path=\"/phoneNumber\" required />\n    </Form.Section>\n  )\n}\n\nrender(\n  <Form.Handler>\n    <MySection />\n  </Form.Handler>,\n)\n"})}),"\n",(0,t.jsx)(n.h2,{children:"Schema support"}),"\n",(0,t.jsxs)(n.p,{children:["You can also use a ",(0,t.jsx)(n.code,{children:"schema"})," on the ",(0,t.jsx)(n.a,{href:"/extensions/forms/Form/Handler",children:"Form.Handler"})," to define the validation rules for the fields inside the section."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Using Zod:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'import { Form, Field, z } from \'@dnb/eufemia/extensions/forms\'\n\nconst MySection = (props) => {\n  return (\n    <Form.Section {...props}>\n      <Field.PhoneNumber path="/phoneNumber" />\n    </Form.Section>\n  )\n}\n\nconst formSchema = z.object({\n  mySection: z.object({\n    phoneNumber: z.string().regex(/^[0-9]{10}$/),\n  }),\n})\n\nfunction MyForm() {\n  return (\n    <Form.Handler schema={formSchema}>\n      <MySection path="/mySection" />\n    </Form.Handler>\n  )\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Using JSON (Ajv):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import {\n  Form,\n  Field,\n  JSONSchema,\n  makeAjvInstance,\n} from '@dnb/eufemia/extensions/forms'\n\nconst ajv = makeAjvInstance()\nconst MySection = (props) => {\n  return (\n    <Form.Section {...props}>\n      <Field.PhoneNumber path=\"/phoneNumber\" />\n    </Form.Section>\n  )\n}\n\nconst formSchema: JSONSchema = {\n  type: 'object',\n  properties: {\n    mySection: {\n      type: 'object',\n      properties: {\n        phoneNumber: {\n          type: 'string',\n          pattern: '^[0-9]{10}$',\n        },\n      },\n      required: ['phoneNumber'],\n    },\n  },\n}\n\nfunction MyForm() {\n  return (\n    <Form.Handler schema={formSchema} ajvInstance={ajv}>\n      <MySection path=\"/mySection\" />\n    </Form.Handler>\n  )\n}\n"})}),"\n",(0,t.jsx)(n.h3,{children:"Section-level schema"}),"\n",(0,t.jsxs)(n.p,{children:["You can define a ",(0,t.jsx)(n.code,{children:"schema"})," directly on the ",(0,t.jsx)(n.code,{children:"Form.Section"})," component. The handler or fields will automatically collect and validate all section schemas without requiring manual merging."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Using Zod:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { Form, Field, z } from '@dnb/eufemia/extensions/forms'\n\nconst sectionSchema = z.object({\n  phoneNumber: z\n    .string()\n    .regex(/^[0-9]{10}$/)\n    .optional()\n    .refine((val) => val !== undefined, {\n      message: 'Field.errorRequired',\n    }),\n})\n\nfunction MyForm() {\n  return (\n    <Form.Handler>\n      <Form.Section path=\"/mySection\" schema={sectionSchema}>\n        <Field.PhoneNumber path=\"/phoneNumber\" />\n      </Form.Section>\n    </Form.Handler>\n  )\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Using JSON (Ajv):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import {\n  Form,\n  Field,\n  JSONSchema,\n  makeAjvInstance,\n} from '@dnb/eufemia/extensions/forms'\n\nconst sectionSchema: JSONSchema = {\n  type: 'object',\n  properties: {\n    phoneNumber: {\n      type: 'string',\n      pattern: '^[0-9]{10}$',\n    },\n  },\n  required: ['phoneNumber'],\n}\n\nconst ajv = makeAjvInstance()\n\nfunction MyForm() {\n  return (\n    <Form.Handler ajvInstance={ajv}>\n      <Form.Section path=\"/mySection\" schema={sectionSchema}>\n        <Field.PhoneNumber path=\"/phoneNumber\" />\n      </Form.Section>\n    </Form.Handler>\n  )\n}\n"})}),"\n",(0,t.jsx)(n.h2,{children:"Translations"}),"\n",(0,t.jsxs)(n.p,{children:["You can use the ",(0,t.jsx)(n.code,{children:"translations"})," property to provide translations for the section:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { Field, Form } from '@dnb/eufemia/extensions/forms'\n\nconst translations = {\n  // It's optional to wrap the translations in an additional \"MySection\" object\n  'nb-NO': { MySection: { MyField: { label: 'Felt label' } } },\n  'en-GB': { MySection: { MyField: { label: 'Field label' } } },\n}\n\n// For TypeScript support\ntype Translation = (typeof translations)[keyof typeof translations]\n\nexport function MySection() {\n  return (\n    <Form.Section translations={translations}>\n      <ContentOfMySection />\n    </Form.Section>\n  )\n}\n\nfunction ContentOfMySection() {\n  const { MyField } = Form.useTranslation<Translation>().MySection\n  return <Field.String label={MyField.label} path=\"/custom\" />\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["This way it is possible to extend or change the translations for a specific section from a ",(0,t.jsx)(n.code,{children:"Form.Handler"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { Form } from '@dnb/eufemia/extensions/forms'\nimport { MySection } from './form-sections'\n\nconst myTranslations = {\n  'nb-NO': { MySection: { MyField: { label: 'Egendefinert' } } },\n  'en-GB': { MySection: { MyField: { label: 'Custom' } } },\n}\n\nexport function MyForm() {\n  return (\n    <Form.Handler translations={myTranslations}>\n      <MySection />\n    </Form.Handler>\n  )\n}\n"})}),"\n",(0,t.jsx)(n.h2,{children:"Edit and View container"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"Form.Section"})," supports a ",(0,t.jsx)(n.a,{href:"/uilib/extensions/forms/Form/Section/EditContainer/",children:"Form.Section.EditContainer"})," and a ",(0,t.jsx)(n.a,{href:"/uilib/extensions/forms/Form/Section/ViewContainer/",children:"Form.Section.ViewContainer"})," container. The edit container should be used for data input with fields, while the view container is used to display the data in a read-only manner."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'import { Form, Field } from \'@dnb/eufemia/extensions/forms\'\n\nfunction MyEditContainer() {\n  return (\n    <Form.Section.EditContainer>\n      <Field.Name.First path="/firstName" />\n      <Field.Name.Last path="/lastName" />\n    </Form.Section.EditContainer>\n  )\n}\n\nfunction MyViewContainer() {\n  return (\n    <Form.Section.EditContainer>\n      <Value.Name.First path="/firstName" />\n      <Value.Name.Last path="/lastName" />\n    </Form.Section.EditContainer>\n  )\n}\n\nfunction MySection() {\n  return (\n    <Form.Section>\n      <MyEditContainer />\n      <MyViewContainer />\n    </Form.Section>\n  )\n}\n\nrender(\n  <Form.Handler>\n    <MySection />\n    <Form.SubmitButton />\n  </Form.Handler>,\n)\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Note: The reason ",(0,t.jsx)(n.code,{children:"Done"})," is used in the toolbar button instead of ",(0,t.jsx)(n.code,{children:"Save"})," is because validation is performed in fields. If we decouple the data entered in a section, the ",(0,t.jsx)(n.code,{children:"Form.Handler"})," will not be able to validate the data on submit. This can also lead to missing data because the user can press the submit button before ",(0,t.jsx)(n.code,{children:"Save"})," is pressed."]}),"\n",(0,t.jsx)(n.h2,{children:"Snapshot testing of a section (block)"}),"\n",(0,t.jsx)(n.p,{children:'One way to ensure a "contract" of what you expect a section to be outlined as, is to create a snapshot test:'}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { Form, Tools } from '@dnb/eufemia/extensions/forms'\nimport { GenerateRef } from '@dnb/eufemia/extensions/forms/Tools/ListAllProps'\n\nit('MySection should match snapshot', () => {\n  const generateRef = React.createRef<GenerateRef>()\n\n  render(\n    <Form.Handler>\n      <Tools.ListAllProps generateRef={generateRef}>\n        <MySection />\n      </Tools.ListAllProps>\n    </Form.Handler>,\n  )\n\n  const { propsOfFields, propsOfValues } = generateRef.current()\n  expect(propsOfFields).toMatchInlineSnapshot(`...`)\n  expect(propsOfValues).toMatchInlineSnapshot(`...`)\n})\n"})})]})}n.default=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,i.R)(),e.components);return n?(0,t.jsx)(n,Object.assign({},e,{children:(0,t.jsx)(r,e)})):r(e)}}}]);
//# sourceMappingURL=c956fcfbc4e33681123b7dfb8f8ed54ca19e76f9-76b0ae8d67715dafafbd.js.map