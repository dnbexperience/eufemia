"use strict";(self.webpackChunkdnb_design_system_portal=self.webpackChunkdnb_design_system_portal||[]).push([[79564,99587,64339],{93807:function(n,e,t){t.r(e);var r=t(52322),a=t(45392),o=t(52185),s=t(74500);function i(n){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.default,{}),"\n",(0,r.jsx)(s.default,{})]})}e.default=function(n){void 0===n&&(n={});const{wrapper:e}=Object.assign({},(0,a.ah)(),n.components);return e?(0,r.jsx)(e,Object.assign({},n,{children:(0,r.jsx)(i,n)})):i()}},74500:function(n,e,t){t.r(e);var r=t(52322),a=t(45392),o=t(94040);function s(n){const e=Object.assign({h2:"h2",h3:"h3"},(0,a.ah)(),n.components);return o||i("Examples",!1),o.AsyncStepsLayout||i("Examples.AsyncStepsLayout",!0),o.Default||i("Examples.Default",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{children:"Demo"}),"\n",(0,r.jsx)(e.h3,{children:"Basic usage"}),"\n",(0,r.jsx)(o.Default,{}),"\n",(0,r.jsx)(e.h3,{children:"Async steps"}),"\n",(0,r.jsx)(o.AsyncStepsLayout,{})]})}function i(n,e){throw new Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}e.default=function(n){void 0===n&&(n={});const{wrapper:e}=Object.assign({},(0,a.ah)(),n.components);return e?(0,r.jsx)(e,Object.assign({},n,{children:(0,r.jsx)(s,n)})):s(n)}},52185:function(n,e,t){t.r(e);var r=t(52322),a=t(45392);function o(n){const e=Object.assign({h2:"h2",p:"p",code:"code",pre:"pre"},(0,a.ah)(),n.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{children:"Description"}),"\n",(0,r.jsxs)(e.p,{children:[(0,r.jsx)(e.code,{children:"StepsLayout"})," is a wrapper component for showing forms with a StepIndicator for navigation between several steps."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:"import {\n  StepsLayout,\n  StepsContext,\n  Form,\n} from '@dnb/eufemia/extensions/forms'\nrender(\n  <StepsContext.Provider>\n    <StepsLayout.Step>\n      <Form.MainHeading>Heading</Form.MainHeading>\n      <Card>\n        <P>Contents</P>\n      </Card>\n      <StepsLayout.NextButton />\n    </StepsLayout.Step>\n  </StepsContext.Provider>,\n)\n"})})]})}e.default=function(n){void 0===n&&(n={});const{wrapper:e}=Object.assign({},(0,a.ah)(),n.components);return e?(0,r.jsx)(e,Object.assign({},n,{children:(0,r.jsx)(o,n)})):o(n)}},17897:function(n,e,t){t.r(e),t.d(e,{AsyncChangeBehavior:function(){return u},AsyncSubmitBehavior:function(){return i},Default:function(){return s},WithinOtherComponents:function(){return l},createRequest:function(){return c}});var r=t(7325),a=t(52750),o=t(52322);const s=()=>(0,o.jsx)(r.Z,{children:'<Form.SubmitIndicator state="pending" />\n'}),i=()=>(0,o.jsx)(r.Z,{scope:{createRequest:c,debounceAsync:a.k},noInline:!0,children:'const delay = debounceAsync(async function () {\n  try {\n    const request = createRequest()\n    await request(1000) // Simulate a request\n  } catch (error) {\n    return error\n  }\n})\nrender(\n  <Form.Handler onSubmit={delay}>\n    <Card stack>\n      <Field.String path="/myField" label="Short label" />\n      <Form.ButtonRow>\n        <Form.SubmitButton />\n        <Button variant="tertiary">Cancel</Button>\n      </Form.ButtonRow>\n    </Card>\n  </Form.Handler>,\n)\n'}),u=()=>(0,o.jsx)(r.Z,{scope:{createRequest:c,debounceAsync:a.k},noInline:!0,children:'const delay = debounceAsync(async function () {\n  try {\n    const request = createRequest()\n    await request(1000) // Simulate a request\n  } catch (error) {\n    return error\n  }\n})\nrender(\n  <Form.Handler onSubmit={delay} onChange={delay}>\n    <Card stack>\n      <Field.String\n        path="/myField1"\n        label="Label (with async validation)"\n        placeholder="Write something ..."\n        validator={delay}\n      />\n      <FieldBlock width="medium">\n        <Field.String\n          path="/myField2"\n          width="stretch"\n          label="This is a long label"\n        />\n      </FieldBlock>\n      <Form.ButtonRow>\n        <Form.SubmitButton />\n        <Button variant="tertiary">Cancel</Button>\n      </Form.ButtonRow>\n    </Card>\n  </Form.Handler>,\n)\n'}),c=()=>{let n,e;const t=t=>new Promise((r=>{e=r,n=setTimeout((()=>{r({hasError:!1})}),t)}));return t.cancel=()=>{var t;null===(t=e)||void 0===t||t({hasError:!0}),clearTimeout(n),n=null},t},l=()=>(0,o.jsx)(r.Z,{children:'<Form.Handler>\n  <Flex.Horizontal align="center">\n    <Form.SubmitButton showIndicator />\n    <Button variant="secondary" icon="chevron_right">\n      Secondary\n      <Form.SubmitIndicator state="pending" />\n    </Button>\n    <Button variant="tertiary">\n      Tertiary\n      <Form.SubmitIndicator state="pending" />\n    </Button>\n    <FormLabel>\n      Label\n      <Form.SubmitIndicator state="pending" />\n    </FormLabel>\n  </Flex.Horizontal>\n</Form.Handler>\n'})},94040:function(n,e,t){t.r(e),t.d(e,{AsyncStepsLayout:function(){return c},Default:function(){return u}});var r=t(7325),a=t(64129),o=t(52750),s=(t(2784),t(17897)),i=t(52322);const u=()=>(0,i.jsx)(r.Z,{scope:{StepsLayout:a.Z},"data-visual-test":"steps-layout-card-border",children:'<Form.Handler\n  data={{\n    firstName: \'John\',\n    lastName: \'Doe\',\n    streetName: \'Osloveien\',\n    streetNr: 12,\n    postalCode: \'1234\',\n    city: \'Oslo\',\n  }}\n>\n  <StepsLayout>\n    <StepsLayout.Step title="Step 1">\n      <Form.MainHeading>Heading</Form.MainHeading>\n      <Card>\n        <P>Contents</P>\n      </Card>\n      <Card>\n        <P>Contents</P>\n      </Card>\n      <StepsLayout.NextButton />\n    </StepsLayout.Step>\n\n    <StepsLayout.Step title="Step 2">\n      <Form.MainHeading>Heading</Form.MainHeading>\n      <Card>\n        <P>Contents</P>\n      </Card>\n      <Form.ButtonRow>\n        <StepsLayout.PreviousButton />\n        <StepsLayout.NextButton />\n      </Form.ButtonRow>\n    </StepsLayout.Step>\n\n    <StepsLayout.Step title="Summary">\n      <Form.MainHeading>Summary</Form.MainHeading>\n      <Card stack>\n        <Form.SubHeading>Deliver address</Form.SubHeading>\n\n        <Value.SummaryList layout="grid">\n          <Value.String label="First name" path="/firstName" />\n          <Value.String label="Last name" path="/lastName" />\n\n          <Value.String label="Street" path="/streetName" />\n          <Value.Number label="Nr." path="/streetNr" />\n\n          <Value.String label="Postalc." path="/postalCode" />\n          <Value.String label="City" path="/city" />\n        </Value.SummaryList>\n      </Card>\n      <StepsLayout.PreviousButton />\n    </StepsLayout.Step>\n  </StepsLayout>\n</Form.Handler>\n'}),c=()=>(0,i.jsx)(r.Z,{scope:{StepsLayout:a.Z,createRequest:s.createRequest,debounceAsync:o.k},noInline:!0,children:"const MyForm = () => {\n  const onStepChange = React.useCallback(async (index, mode) => {\n    console.log('onStepChange', index)\n    if (mode === 'next') {\n      try {\n        const request = createRequest()\n        await request(1000) // Simulate a request\n      } catch (error) {\n        return error\n      }\n    }\n\n    // Optional, you can show a FormStatus at the bottom of the form\n    return {\n      info: 'Info message: ' + index,\n    }\n  }, [])\n  const onSubmit = React.useCallback(async (data) => {\n    console.log('onSubmit', data)\n    try {\n      const request = createRequest()\n      await request(1000) // Simulate a request\n    } catch (error) {\n      return error\n    }\n\n    // Optional, you can show a FormStatus at the bottom of the form\n    return {\n      warning: 'Warning message',\n    }\n  }, [])\n  const validator = React.useCallback(async (value) => {\n    try {\n      const request = createRequest()\n      await request(1000) // Simulate a request\n    } catch (error) {\n      return error\n    }\n    if (value === 'invalid') {\n      return Error('Error message')\n    }\n  }, [])\n  const validator1 = debounceAsync(validator)\n  const validator2 = debounceAsync(validator)\n  return (\n    <Form.Handler onSubmit={onSubmit}>\n      <StepsLayout onStepChange={onStepChange} variant=\"drawer\">\n        <StepsLayout.Step title=\"Step 1\">\n          <Card stack>\n            <Field.String\n              label=\"Required field with async validator\"\n              validator={validator1}\n              path=\"/field1\"\n              required\n            />\n            <Field.String\n              label=\"Field with async validator\"\n              validator={validator2}\n              path=\"/field2\"\n            />\n          </Card>\n          <Form.ButtonRow>\n            <StepsLayout.PreviousButton />\n            <StepsLayout.NextButton />\n          </Form.ButtonRow>\n        </StepsLayout.Step>\n\n        <StepsLayout.Step title=\"Step 2\">\n          <Form.MainHeading>Heading</Form.MainHeading>\n          <Card>\n            <P>Contents of step 2</P>\n          </Card>\n          <Form.ButtonRow>\n            <StepsLayout.PreviousButton />\n            <Form.SubmitButton />\n          </Form.ButtonRow>\n        </StepsLayout.Step>\n      </StepsLayout>\n    </Form.Handler>\n  )\n}\nrender(<MyForm />)\n"})},59626:function(n,e,t){const r=t(2784).createContext(void 0);e.Z=r},64129:function(n,e,t){t.d(e,{Z:function(){return H}});var r=t(2784),a=t(72779),o=t.n(a),s=t(80215),i=t(76603),u=t(80945),c=t(56239),l=t(67155),d=t(21068),p=t(30392),m=t(59626),h=t(52322);function S(n){const{className:e,index:t,children:a}=n,s=(0,r.useContext)(m.Z);return(null==s?void 0:s.activeIndex)!==t?null:(0,h.jsx)(p.Z,{className:o()("dnb-forms-step",e),direction:"vertical",...(0,p.W)(n),children:a})}S._supportsSpacingProps=!0;var y=S,b=t(28952),v=t(65927),x=t(71370);function f(n){const e=(0,r.useContext)(b.Z),{className:t,variant:a="primary",icon_position:s="right",icon:i="chevron_right",children:u=(null==e?void 0:e.translation.Forms.stepNext)}=n,c=(0,r.useContext)(m.Z);return(0,h.jsx)(v.Z,{children:(0,h.jsx)(x.Z,{type:"button",className:o()("dnb-forms-next-button",t),onClick:null==c?void 0:c.handleNext,variant:a,icon_position:s,icon:i,...n,children:u})})}f._supportsSpacingProps=!0;var g=f,F=t(96844);function C(n){const e=(0,r.useContext)(b.Z),{className:t,variant:a="tertiary",icon_position:s="left",icon:i="chevron_left",children:u=(null==e?void 0:e.translation.Forms.stepPrevious)}=n,c=(0,r.useContext)(m.Z),l={};return 0===(null==c?void 0:c.activeIndex)&&(l.disabled=!0),(0,h.jsx)(v.Z,{children:(0,h.jsx)(F.Z,{className:o()("dnb-forms-previous-button",t),onClick:null==c?void 0:c.handlePrevious,variant:a,icon_position:s,icon:i,...l,...n,children:u})})}C._supportsSpacingProps=!0;var j=C;function w(n){const{className:e}=n;return(0,h.jsxs)(v.Z,{className:o()("dnb-forms-buttons",e),...n,children:[(0,h.jsx)(j,{}),(0,h.jsx)(g,{})]})}w._supportsSpacingProps=!0;var L=w,B=t(80370);function N(n){const{className:e,id:t,mode:a="strict",scrollTopOnStepChange:p,initialActiveIndex:S=0,onStepChange:b,children:v,noAnimation:x=!0,variant:f="sidebar",sidebarId:g,...F}=n,C=(0,r.useContext)(d.Z),{hasContext:j,setFormState:w,handleSubmitCall:L,setShowAllErrors:H,showAllErrors:Z,scrollToTop:P}=C,_=(0,l.Z)(t),{1:q}=(0,r.useReducer)((()=>({})),{}),R=(0,r.useRef)(S),k=(0,r.useRef)({});k.current[R.current]=Z;const A=(0,r.useCallback)((async(n,e)=>(0,c.S)(b)?await b(n,e):null==b?void 0:b(n,e)),[b]),E=(0,r.useCallback)((()=>{L({skipFieldValidation:!0,skipErrorCheck:!0,enableAsyncBehaviour:(0,c.S)(b),onSubmit:async()=>{const n=await A(R.current-1,"previous");return w("abort"),n instanceof Error||(R.current=R.current-1,q()),p&&P(),n}})}),[A,L,b,P,p,w]),I=(0,r.useCallback)((()=>{L({enableAsyncBehaviour:(0,c.S)(b),onSubmit:async()=>{const n=await A(R.current+1,"next");return w("abort"),H(k.current[R.current+1]),n instanceof Error||(R.current=R.current+1,q()),p&&P(),n}})}),[A,L,b,P,p,w,H]),O=r.Children.map(v,(n=>{var e;if(!r.isValidElement(n)||n.type!==y)throw new Error("Only Step can be children of StepsLayout");return null!==(e=n.props.title)&&void 0!==e?e:"Title missing"})),M=(0,r.useCallback)((n=>{let{current_step:e}=n;R.current=e,H(k.current[e]),q()}),[H]);return j?(0,h.jsx)(m.Z.Provider,{value:{activeIndex:R.current,handlePrevious:E,handleNext:I},children:(0,h.jsxs)(s.Z,{className:o()("dnb-forms-steps-layout","drawer"===f&&"dnb-forms-steps-layout--drawer",e),...F,children:[(0,h.jsxs)("aside",{className:"dnb-forms-steps-layout__sidebar",children:[(0,h.jsx)(i.Z.Sidebar,{sidebar_id:_}),(0,h.jsx)(i.Z,{bottom:!0,current_step:R.current,data:O,mode:a,no_animation:x,on_change:M,sidebar_id:"drawer"!==f||g?g||_:""})]}),(0,h.jsx)("div",{className:"dnb-forms-steps-layout__contents",children:r.Children.map(v,((n,e)=>r.isValidElement(n)&&n.type===y?r.cloneElement(n,{index:e}):n))})]})}):((0,u.ZK)("You may wrap StepsLayout in Form.Handler"),(0,h.jsx)(B.Z,{children:(0,h.jsx)(N,{...n,id:_})}))}N._supportsSpacingProps=!0,N.Step=y,N.NextButton=g,N.PreviousButton=j,N.Buttons=L;var H=N}}]);
//# sourceMappingURL=component---src-docs-uilib-extensions-forms-extended-features-steps-layout-steps-layout-mdx-76092f5828f4b9955173.js.map