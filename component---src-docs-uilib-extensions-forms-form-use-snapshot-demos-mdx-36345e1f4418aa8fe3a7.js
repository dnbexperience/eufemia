"use strict";(self.webpackChunkdnb_design_system_portal=self.webpackChunkdnb_design_system_portal||[]).push([[45590],{70173:function(n,e,t){t.r(e),t.d(e,{default:function(){return p}});var r={};t.r(r),t.d(r,{InWizard:function(){return l},UndoRedo:function(){return c}});var o=t(52322),s=t(45392),i=(t(2784),t(46832)),a=t(4902);const l=()=>(0,o.jsx)(i.Z,{noInline:!0,children:'const MyForm = () => {\n  const { createSnapshot, revertSnapshot } = Form.useSnapshot(\'my-form\')\n  return (\n    <Form.Handler id="my-form">\n      <Wizard.Container\n        onStepChange={(index, mode, args) => {\n          if (mode === \'previous\') {\n            revertSnapshot(String(args.id), \'my-snapshot-slice\')\n          } else {\n            createSnapshot(args.previousStep.id, \'my-snapshot-slice\')\n          }\n        }}\n      >\n        <Wizard.Step title="Step A" id="step-a">\n          <Form.Snapshot name="my-snapshot-slice">\n            <Field.String path="/foo" label="Will be reverted" />\n          </Form.Snapshot>\n          <Field.String path="/bar" label="Will stay" />\n          <Wizard.Buttons />\n        </Wizard.Step>\n\n        <Wizard.Step title="Step B" id="step-b">\n          <Field.String path="/foo" label="Will be reverted" />\n          <Field.String path="/bar" label="Will stay" />\n          <Wizard.Buttons />\n        </Wizard.Step>\n      </Wizard.Container>\n    </Form.Handler>\n  )\n}\nrender(<MyForm />)\n'}),c=()=>(0,o.jsx)(i.Z,{scope:{Tools:a},noInline:!0,children:'const MyComponent = () => {\n  const { createSnapshot, applySnapshot } = Form.useSnapshot()\n  const pointerRef = React.useRef(0)\n  React.useEffect(() => {\n    createSnapshot(pointerRef.current, \'my-snapshot-slice\')\n  }, [createSnapshot])\n  const changeHandler = React.useCallback(() => {\n    pointerRef.current += 1\n    createSnapshot(pointerRef.current, \'my-snapshot-slice\')\n  }, [createSnapshot])\n  const undoHandler = React.useCallback(() => {\n    pointerRef.current -= 1\n    applySnapshot(pointerRef.current, \'my-snapshot-slice\')\n  }, [applySnapshot])\n  const redoHandler = React.useCallback(() => {\n    pointerRef.current += 1\n    applySnapshot(pointerRef.current, \'my-snapshot-slice\')\n  }, [applySnapshot])\n  return (\n    <>\n      <Card stack>\n        <Form.Snapshot name="my-snapshot-slice">\n          <Field.String\n            path="/foo"\n            label="Will be reverted"\n            onChange={changeHandler}\n          />\n        </Form.Snapshot>\n        <Field.String path="/bar" label="Will stay" />\n      </Card>\n\n      <Form.ButtonRow>\n        <Button variant="secondary" onClick={undoHandler}>\n          Undo\n        </Button>\n        <Button variant="secondary" onClick={redoHandler}>\n          Redo\n        </Button>\n      </Form.ButtonRow>\n\n      <Tools.Log top />\n    </>\n  )\n}\nrender(\n  <Form.Handler>\n    <MyComponent />\n  </Form.Handler>,\n)\n'});function u(n){const e=Object.assign({h2:"h2",h3:"h3",p:"p"},(0,s.ah)(),n.components);return r||d("Examples",!1),l||d("Examples.InWizard",!0),c||d("Examples.UndoRedo",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h2,{children:"Demos"}),"\n",(0,o.jsx)(e.h3,{children:"Undo / Redo"}),"\n",(0,o.jsx)(c,{}),"\n",(0,o.jsx)(e.h3,{children:"Used in a Wizard"}),"\n",(0,o.jsx)(e.p,{children:"This example reverts the form data to its previous state when the user navigates back to a previous step."}),"\n",(0,o.jsx)(l,{})]})}var p=function(n){void 0===n&&(n={});const{wrapper:e}=Object.assign({},(0,s.ah)(),n.components);return e?(0,o.jsx)(e,Object.assign({},n,{children:(0,o.jsx)(u,n)})):u(n)};function d(n,e){throw new Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}},38734:function(n,e,t){t.d(e,{Z:function(){return l}});var r=t(84616),o=t(2784),s=t(2394),i=t(21068);const a=["minLength","maxLength","pattern","description","min","max","multipleOf","exclusiveMinimum","exclusiveMaximum"];function l(n){const{generateRef:e,filterData:t,log:l,children:c}=n||{},{fieldPropsRef:u,valuePropsRef:p,data:d,hasContext:h}=(0,o.useContext)(i.Z),f=(0,o.useRef)({});f.current=d;const m=(0,o.useCallback)((()=>{const n=Object.entries((null==u?void 0:u.current)||{}).reduce(((n,e)=>{let[o,i]=e;if(o.startsWith("/")){const e=o.substring(1),l=e.split("/"),c=l.length,u={type:i.valueType||"string"};for(const n of a)i[n]&&(u[n]=i[n]);if(c>1){const e=[""];for(const o of l){e.push(o);const a=e.join("/properties/"),c=e.length-1===l.length,p=s.e$(n,a)?s.U2(n,a):null,d=c?u:p;if(c)!1!==(null==t?void 0:t[a])&&s.t8(n,a,d);else{const e={type:"object",...p},o=[];i.required&&o.push(l.at(-1)),null!=p&&p.required&&o.push.apply(o,(0,r.Z)(p.required)),o.length>0&&(e.required=o),!1!==(null==t?void 0:t[a])&&s.t8(n,a,e)}}}else!1!==(null==t?void 0:t[o])&&s.t8(n.properties,o,u),i.required&&n.required.push(e)}return n}),{type:"object",properties:{},required:[]}),e=Object.entries((null==u?void 0:u.current)||{}).reduce(((n,e)=>{let[t,r]=e;if(t.startsWith("/")){const e={};for(const n in r)void 0!==r[n]&&"function"!=typeof r[n]&&(e[n]=r[n]);s.t8(n,t,e)}return n}),{}),o=Object.entries((null==p?void 0:p.current)||{}).reduce(((n,e)=>{let[t,r]=e;if(t.startsWith("/")){const e={};for(const n in r)void 0!==r[n]&&"function"!=typeof r[n]&&(e[n]=r[n]);s.t8(n,t,e)}return n}),{});return 0===n.required.length&&delete n.required,{schema:n,data:f.current,propsOfFields:e,propsOfValues:o}}),[u,t,p]);return h&&(l&&console.log(m().schema),e&&(e.current=m)),c}},10454:function(n,e,t){t.d(e,{Z:function(){return i}});var r=t(2784),o=t(2394),s=t(21068);function i(n){const{log:e,generateRef:t,filterData:i,children:a}=n||{},{fieldPropsRef:l,valuePropsRef:c,data:u,hasContext:p}=(0,r.useContext)(s.Z);(0,r.useRef)({}).current=u;const d=(0,r.useCallback)((()=>{const n=Object.entries((null==l?void 0:l.current)||{}).reduce(((n,e)=>{let[t,s]=e;if(t.startsWith("/")){const e={};for(const n in s)void 0===s[n]||"function"==typeof s[n]||(0,r.isValidElement)(s[n])||(e[n]=s[n]);!1!==(null==i?void 0:i[t])&&o.t8(n,t,e)}return n}),{}),e=Object.entries((null==c?void 0:c.current)||{}).reduce(((n,e)=>{let[t,s]=e;if(t.startsWith("/")){const e={};for(const n in s)void 0===s[n]||"function"==typeof s[n]||(0,r.isValidElement)(s[n])||(e[n]=s[n]);!1!==(null==i?void 0:i[t])&&o.t8(n,t,e)}return n}),{});return{propsOfFields:n,propsOfValues:e}}),[l,i,c]);return p&&(e&&console.log(d()),t&&(t.current=d)),a}},90584:function(n,e,t){var r=t(2784),o=t(21068),s=t(4408),i=t(9149),a=t(52322);function l(n){let{placeholder:e,label:t,data:l,...u}=n;const{data:p}=(0,r.useContext)(o.Z);return(0,a.jsxs)(s.Z,{element:"output",backgroundColor:"sand-yellow",style:{maxWidth:"80vw"},innerSpace:!0,...u,children:[t&&(0,a.jsx)(i.Z,{bottom:!0,children:(0,a.jsx)("b",{children:t})}),(0,a.jsxs)("pre",{children:[e&&0===Object.keys((null!=l?l:p)||{}).length?e:JSON.stringify(c(null!=l?l:p),null,2),"Â "]})]})}function c(n,e){return void 0===e&&(e="undefined"),void 0===n?e:n&&"object"==typeof n&&n!==e?{...n,...Object.fromEntries(Object.entries(n).map((n=>{let[e,t]=n;return[e,c(t)]})))}:n}l._supportsSpacingProps=!0,e.Z=l},4902:function(n,e,t){t.r(e),t.d(e,{GenerateSchema:function(){return r.Z},ListAllProps:function(){return o.Z},Log:function(){return s.Z}});var r=t(38734),o=t(10454),s=t(90584)}}]);
//# sourceMappingURL=component---src-docs-uilib-extensions-forms-form-use-snapshot-demos-mdx-36345e1f4418aa8fe3a7.js.map