"use strict";(self.webpackChunkdnb_design_system_portal=self.webpackChunkdnb_design_system_portal||[]).push([[6951,45590,15239],{16929:function(n,e,t){t.r(e);var r=t(52322),o=t(45392),s=t(4359),i=t(70173);function a(n){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.default,{}),"\n",(0,r.jsx)(i.default,{})]})}e.default=function(n){void 0===n&&(n={});const{wrapper:e}=Object.assign({},(0,o.ah)(),n.components);return e?(0,r.jsx)(e,Object.assign({},n,{children:(0,r.jsx)(a,n)})):a()}},70173:function(n,e,t){t.r(e),t.d(e,{default:function(){return h}});var r={};t.r(r),t.d(r,{InWizard:function(){return l},UndoRedo:function(){return c}});var o=t(52322),s=t(45392),i=(t(2784),t(46832)),a=t(4902);const l=()=>(0,o.jsx)(i.Z,{noInline:!0,children:'const MyForm = () => {\n  const { createSnapshot, revertSnapshot } = Form.useSnapshot(\'my-form\')\n  return (\n    <Form.Handler id="my-form">\n      <Wizard.Container\n        onStepChange={(index, mode, args) => {\n          if (mode === \'previous\') {\n            revertSnapshot(String(args.id), \'my-snapshot-slice\')\n          } else {\n            createSnapshot(args.previousStep.id, \'my-snapshot-slice\')\n          }\n        }}\n      >\n        <Wizard.Step title="Step A" id="step-a">\n          <Form.Snapshot name="my-snapshot-slice">\n            <Field.String path="/foo" label="Will be reverted" />\n          </Form.Snapshot>\n          <Field.String path="/bar" label="Will stay" />\n          <Wizard.Buttons />\n        </Wizard.Step>\n\n        <Wizard.Step title="Step B" id="step-b">\n          <Field.String path="/foo" label="Will be reverted" />\n          <Field.String path="/bar" label="Will stay" />\n          <Wizard.Buttons />\n        </Wizard.Step>\n      </Wizard.Container>\n    </Form.Handler>\n  )\n}\nrender(<MyForm />)\n'}),c=()=>(0,o.jsx)(i.Z,{scope:{Tools:a},noInline:!0,children:'const MyComponent = () => {\n  const { createSnapshot, applySnapshot } = Form.useSnapshot()\n  const pointerRef = React.useRef(0)\n  React.useEffect(() => {\n    createSnapshot(pointerRef.current, \'my-snapshot-slice\')\n  }, [createSnapshot])\n  const changeHandler = React.useCallback(() => {\n    pointerRef.current += 1\n    createSnapshot(pointerRef.current, \'my-snapshot-slice\')\n  }, [createSnapshot])\n  const undoHandler = React.useCallback(() => {\n    pointerRef.current -= 1\n    applySnapshot(pointerRef.current, \'my-snapshot-slice\')\n  }, [applySnapshot])\n  const redoHandler = React.useCallback(() => {\n    pointerRef.current += 1\n    applySnapshot(pointerRef.current, \'my-snapshot-slice\')\n  }, [applySnapshot])\n  return (\n    <>\n      <Card stack>\n        <Form.Snapshot name="my-snapshot-slice">\n          <Field.String\n            path="/foo"\n            label="Will be reverted"\n            onChange={changeHandler}\n          />\n        </Form.Snapshot>\n        <Field.String path="/bar" label="Will stay" />\n      </Card>\n\n      <Form.ButtonRow>\n        <Button variant="secondary" onClick={undoHandler}>\n          Undo\n        </Button>\n        <Button variant="secondary" onClick={redoHandler}>\n          Redo\n        </Button>\n      </Form.ButtonRow>\n\n      <Tools.Log top />\n    </>\n  )\n}\nrender(\n  <Form.Handler>\n    <MyComponent />\n  </Form.Handler>,\n)\n'});function d(n){const e=Object.assign({h2:"h2",h3:"h3",p:"p"},(0,s.ah)(),n.components);return r||p("Examples",!1),l||p("Examples.InWizard",!0),c||p("Examples.UndoRedo",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.h2,{children:"Demos"}),"\n",(0,o.jsx)(e.h3,{children:"Undo / Redo"}),"\n",(0,o.jsx)(c,{}),"\n",(0,o.jsx)(e.h3,{children:"Used in a Wizard"}),"\n",(0,o.jsx)(e.p,{children:"This example reverts the form data to its previous state when the user navigates back to a previous step."}),"\n",(0,o.jsx)(l,{})]})}var h=function(n){void 0===n&&(n={});const{wrapper:e}=Object.assign({},(0,s.ah)(),n.components);return e?(0,o.jsx)(e,Object.assign({},n,{children:(0,o.jsx)(d,n)})):d(n)};function p(n,e){throw new Error("Expected "+(e?"component":"object")+" `"+n+"` to be defined: you likely forgot to import, pass, or provide it.")}},4359:function(n,e,t){t.r(e);var r=t(52322),o=t(45392);function s(n){const e=Object.assign({h2:"h2",p:"p",code:"code",pre:"pre",ul:"ul",li:"li",a:"a",h3:"h3"},(0,o.ah)(),n.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(e.h2,{children:"Description"}),"\n",(0,r.jsxs)(e.p,{children:["The ",(0,r.jsx)(e.code,{children:"Form.useSnapshot"})," hook lets you store data snapshots of your form data, either inside or outside of the form context."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-tsx",children:"import { Form } from '@dnb/eufemia/extensions/forms'\n\nfunction MyComponent() {\n  const { createSnapshot, applySnapshot, revertSnapshot } =\n    Form.useSnapshot()\n\n  return <>MyComponent</>\n}\n\nrender(\n  <Form.Handler>\n    <MyComponent />\n  </Form.Handler>,\n)\n"})}),"\n",(0,r.jsx)(e.p,{children:"The hook returns an object with the following properties:"}),"\n",(0,r.jsxs)(e.ul,{children:["\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"createSnapshot"})," will store the current data as a new snapshot with the given id."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"applySnapshot"})," will revert the data to the snapshot with the given id (required)."]}),"\n",(0,r.jsxs)(e.li,{children:[(0,r.jsx)(e.code,{children:"revertSnapshot"})," will revert the data to the snapshot with the given id (required). A reverted snapshot gets deleted from the memory."]}),"\n"]}),"\n",(0,r.jsx)(e.h2,{children:"Partial data snapshots"}),"\n",(0,r.jsxs)(e.p,{children:["In order to create and revert a snapshot for a specific part of the data context, you can use the ",(0,r.jsx)(e.code,{children:"Form.Snapshot"})," component:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-tsx",children:'import { Form, Field } from \'@dnb/eufemia/extensions/forms\'\n\nfunction MyForm() {\n  return (\n    <Form.Handler>\n      <Form.Snapshot name="my-snapshot-slice-name">\n        <Field.String path="/foo" label="Will be reverted" />\n        <Field.String path="/bar" label="Me too" />\n      </Form.Snapshot>\n\n      <Field.String path="/baz" label="Will stay as before" />\n    </Form.Handler>\n  )\n}\n'})}),"\n",(0,r.jsxs)(e.p,{children:["When calling the ",(0,r.jsx)(e.code,{children:"createSnapshot"})," or ",(0,r.jsx)(e.code,{children:"revertSnapshot"})," functions, you can pass in your snapshot ",(0,r.jsx)(e.code,{children:"name"})," (my-snapshot-slice-name) as the second parameter. This will make sure that the snapshot is only applied to the given part of the form data."]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-tsx",children:"createSnapshot('my-snapshot-1', 'my-snapshot-slice-name')\nrevertSnapshot('my-snapshot-1', 'my-snapshot-slice-name')\n"})}),"\n",(0,r.jsx)(e.p,{children:"You can check out examples in the demo section."}),"\n",(0,r.jsxs)(e.h2,{children:["Usage of the ",(0,r.jsx)(e.code,{children:"Form.useSnapshot"})," hook"]}),"\n",(0,r.jsxs)(e.p,{children:["You can use the ",(0,r.jsx)(e.code,{children:"Form.useSnapshot"})," hook with or without an ",(0,r.jsx)(e.code,{children:"id"})," (string) property, which is optional and can be used to link the data to a specific ",(0,r.jsx)(e.a,{href:"/uilib/extensions/forms/Form/Handler/",children:"Form.Handler"})," component."]}),"\n",(0,r.jsxs)(e.h3,{children:["Without an ",(0,r.jsx)(e.code,{children:"id"})," property"]}),"\n",(0,r.jsxs)(e.p,{children:['Here "Component" is rendered inside the ',(0,r.jsx)(e.code,{children:"Form.Handler"})," component and does not need an ",(0,r.jsx)(e.code,{children:"id"})," property to access the snapshot:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:"import { Form } from '@dnb/eufemia/extensions/forms'\n\nfunction MyForm() {\n  return (\n    <Form.Handler>\n      <Component />\n    </Form.Handler>\n  )\n}\n\nfunction Component() {\n  const { createSnapshot, revertSnapshot } = Form.useSnapshot()\n}\n"})}),"\n",(0,r.jsxs)(e.h3,{children:["With an ",(0,r.jsx)(e.code,{children:"id"})," property"]}),"\n",(0,r.jsxs)(e.p,{children:['While in this example, "Component" is outside the ',(0,r.jsx)(e.code,{children:"Form.Handler"})," context, but linked together via the ",(0,r.jsx)(e.code,{children:"id"})," (string) property:"]}),"\n",(0,r.jsx)(e.pre,{children:(0,r.jsx)(e.code,{className:"language-jsx",children:"import { Form } from '@dnb/eufemia/extensions/forms'\n\nfunction MyForm() {\n  return (\n    <>\n      <Form.Handler id=\"unique\">...</Form.Handler>\n      <Component />\n    </>\n  )\n}\n\nfunction Component() {\n  const { createSnapshot, revertSnapshot } = Form.useSnapshot('unique')\n}\n"})}),"\n",(0,r.jsx)(e.p,{children:"This is beneficial when you need to utilize the form data in other places within your application."})]})}e.default=function(n){void 0===n&&(n={});const{wrapper:e}=Object.assign({},(0,o.ah)(),n.components);return e?(0,r.jsx)(e,Object.assign({},n,{children:(0,r.jsx)(s,n)})):s(n)}},38734:function(n,e,t){t.d(e,{Z:function(){return l}});var r=t(84616),o=t(2784),s=t(2394),i=t(21068);const a=["minLength","maxLength","pattern","description","min","max","multipleOf","exclusiveMinimum","exclusiveMaximum"];function l(n){const{generateRef:e,filterData:t,log:l,children:c}=n||{},{fieldPropsRef:d,valuePropsRef:h,data:p,hasContext:u}=(0,o.useContext)(i.Z),m=(0,o.useRef)({});m.current=p;const f=(0,o.useCallback)((()=>{const n=Object.entries((null==d?void 0:d.current)||{}).reduce(((n,e)=>{let[o,i]=e;if(o.startsWith("/")){const e=o.substring(1),l=e.split("/"),c=l.length,d={type:i.valueType||"string"};for(const n of a)i[n]&&(d[n]=i[n]);if(c>1){const e=[""];for(const o of l){e.push(o);const a=e.join("/properties/"),c=e.length-1===l.length,h=s.e$(n,a)?s.U2(n,a):null,p=c?d:h;if(c)!1!==(null==t?void 0:t[a])&&s.t8(n,a,p);else{const e={type:"object",...h},o=[];i.required&&o.push(l.at(-1)),null!=h&&h.required&&o.push.apply(o,(0,r.Z)(h.required)),o.length>0&&(e.required=o),!1!==(null==t?void 0:t[a])&&s.t8(n,a,e)}}}else!1!==(null==t?void 0:t[o])&&s.t8(n.properties,o,d),i.required&&n.required.push(e)}return n}),{type:"object",properties:{},required:[]}),e=Object.entries((null==d?void 0:d.current)||{}).reduce(((n,e)=>{let[t,r]=e;if(t.startsWith("/")){const e={};for(const n in r)void 0!==r[n]&&"function"!=typeof r[n]&&(e[n]=r[n]);s.t8(n,t,e)}return n}),{}),o=Object.entries((null==h?void 0:h.current)||{}).reduce(((n,e)=>{let[t,r]=e;if(t.startsWith("/")){const e={};for(const n in r)void 0!==r[n]&&"function"!=typeof r[n]&&(e[n]=r[n]);s.t8(n,t,e)}return n}),{});return 0===n.required.length&&delete n.required,{schema:n,data:m.current,propsOfFields:e,propsOfValues:o}}),[d,t,h]);return u&&(l&&console.log(f().schema),e&&(e.current=f)),c}},10454:function(n,e,t){t.d(e,{Z:function(){return i}});var r=t(2784),o=t(2394),s=t(21068);function i(n){const{log:e,generateRef:t,filterData:i,children:a}=n||{},{fieldPropsRef:l,valuePropsRef:c,data:d,hasContext:h}=(0,r.useContext)(s.Z);(0,r.useRef)({}).current=d;const p=(0,r.useCallback)((()=>{const n=Object.entries((null==l?void 0:l.current)||{}).reduce(((n,e)=>{let[t,s]=e;if(t.startsWith("/")){const e={};for(const n in s)void 0===s[n]||"function"==typeof s[n]||(0,r.isValidElement)(s[n])||(e[n]=s[n]);!1!==(null==i?void 0:i[t])&&o.t8(n,t,e)}return n}),{}),e=Object.entries((null==c?void 0:c.current)||{}).reduce(((n,e)=>{let[t,s]=e;if(t.startsWith("/")){const e={};for(const n in s)void 0===s[n]||"function"==typeof s[n]||(0,r.isValidElement)(s[n])||(e[n]=s[n]);!1!==(null==i?void 0:i[t])&&o.t8(n,t,e)}return n}),{});return{propsOfFields:n,propsOfValues:e}}),[l,i,c]);return h&&(e&&console.log(p()),t&&(t.current=p)),a}},90584:function(n,e,t){var r=t(2784),o=t(21068),s=t(4408),i=t(9149),a=t(52322);function l(n){let{placeholder:e,label:t,data:l,...d}=n;const{data:h}=(0,r.useContext)(o.Z);return(0,a.jsxs)(s.Z,{element:"output",backgroundColor:"sand-yellow",style:{maxWidth:"80vw"},innerSpace:!0,...d,children:[t&&(0,a.jsx)(i.Z,{bottom:!0,children:(0,a.jsx)("b",{children:t})}),(0,a.jsxs)("pre",{children:[e&&0===Object.keys((null!=l?l:h)||{}).length?e:JSON.stringify(c(null!=l?l:h),null,2)," "]})]})}function c(n,e){return void 0===e&&(e="undefined"),void 0===n?e:n&&"object"==typeof n&&n!==e?{...n,...Object.fromEntries(Object.entries(n).map((n=>{let[e,t]=n;return[e,c(t)]})))}:n}l._supportsSpacingProps=!0,e.Z=l},4902:function(n,e,t){t.r(e),t.d(e,{GenerateSchema:function(){return r.Z},ListAllProps:function(){return o.Z},Log:function(){return s.Z}});var r=t(38734),o=t(10454),s=t(90584)}}]);
//# sourceMappingURL=component---src-docs-uilib-extensions-forms-form-use-snapshot-mdx-bf1ef8ada4c98752345f.js.map