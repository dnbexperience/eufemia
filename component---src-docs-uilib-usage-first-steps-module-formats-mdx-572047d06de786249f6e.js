"use strict";(self.webpackChunkdnb_design_system_portal=self.webpackChunkdnb_design_system_portal||[]).push([[76188],{17606:function(e,n,s){s.r(n);var r=s(31085),o=s(71184);function d(e){const n=Object.assign({h1:"h1",p:"p",code:"code",ul:"ul",li:"li",a:"a",strong:"strong",h2:"h2",pre:"pre",h3:"h3",h4:"h4"},(0,o.R)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{children:"ESM and transpiling"}),"\n",(0,r.jsxs)(n.p,{children:["To support every modern front end environment, the ",(0,r.jsx)(n.code,{children:"@dnb/eufemia"})," supports different transpiled module formats:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ESM"})," transpiled ",(0,r.jsx)(n.a,{href:"/uilib/usage/#supported-browsers-and-platforms",children:"for broad browser compatibility"})," (",(0,r.jsx)(n.strong,{children:"default"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"CJS"})," transpiled ",(0,r.jsx)(n.a,{href:"/uilib/usage/#supported-browsers-and-platforms",children:"for broad browser compatibility"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ES"})," with modern JavaScript syntax"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Bundles"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"ESM"})," bundle with modern JavaScript syntax"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"UMD"})," bundle with modern JavaScript syntax"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{children:"Default module format"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"@dnb/eufemia"})," uses ",(0,r.jsx)(n.strong,{children:"ESM"})," as the default module format:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Imports only the code needed for the button\nimport { Button } from '@dnb/eufemia' // ESM transpiled for broad browser compatibility\nimport { Button } from '@dnb/eufemia/es' // Modern JavaScript syntax version\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Because the package is published with ",(0,r.jsx)(n.code,{children:'"type": "module"'}),", Node.js treats its ",(0,r.jsx)(n.code,{children:".js"})," files as ES modules by default. This means you should use ",(0,r.jsx)(n.code,{children:"import"}),"/",(0,r.jsx)(n.code,{children:"export"})," syntax, and ",(0,r.jsx)(n.code,{children:"require()"})," will not work unless you target the ",(0,r.jsx)(n.code,{children:"/cjs"})," build."]}),"\n",(0,r.jsx)(n.h2,{children:"CommonJS (CJS)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.a,{href:"https://nodejs.org/",children:"Node.js"})," may use ",(0,r.jsx)(n.a,{href:"https://requirejs.org",children:"RequireJS"})," and has ",(0,r.jsx)(n.a,{href:"https://requirejs.org/docs/commonjs.html",children:"CommonJS"})," as their default module format, depending on your version and flags."]}),"\n",(0,r.jsx)(n.h3,{children:"SSR"}),"\n",(0,r.jsxs)(n.p,{children:["In case you are using the ",(0,r.jsx)(n.code,{children:"@dnb/eufemia"})," in a environment that cant use ESM, you can import or require everything from the ",(0,r.jsx)(n.code,{children:"/cjs"})," subfolder:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Components\nimport { Button } from '@dnb/eufemia/cjs'\nconst { Button } = require('@dnb/eufemia/cjs/components')\nconst Button = require('@dnb/eufemia/cjs/components/Button')\n\n// Styles\nimport '@dnb/eufemia/cjs/style'\nrequire('@dnb/eufemia/cjs/style')\n"})}),"\n",(0,r.jsx)(n.h4,{children:"Jest and ESM (Node testing environments)"}),"\n",(0,r.jsxs)(n.p,{children:["Older Jest versions uses still CommonJS as the default module format. If you use the default ",(0,r.jsx)(n.code,{children:"@dnb/eufemia"})," imports, then you get a mismatch between ES module and CommonJS formats. To ensure that Jest transforms your code in to CJS, you can use the following Jest configuration ",(0,r.jsx)(n.code,{children:"--moduleNameMapper"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'jest --moduleNameMapper \'{"@dnb/eufemia(.*)":"@dnb/eufemia/cjs$1"}\'\n'})}),"\n",(0,r.jsxs)(n.p,{children:["or in a ",(0,r.jsx)(n.code,{children:"jest.config.js"})," or ",(0,r.jsx)(n.code,{children:"jest.preset.js"})," file:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"  module.exports = {\n    ...\n    moduleNameMapper: { '@dnb/eufemia(.*)': '@dnb/eufemia/cjs$1' }\n  }\n"})})]})}n.default=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,o.R)(),e.components);return n?(0,r.jsx)(n,Object.assign({},e,{children:(0,r.jsx)(d,e)})):d(e)}}}]);
//# sourceMappingURL=component---src-docs-uilib-usage-first-steps-module-formats-mdx-572047d06de786249f6e.js.map