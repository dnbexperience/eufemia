"use strict";(self.webpackChunkdnb_design_system_portal=self.webpackChunkdnb_design_system_portal||[]).push([[17242],{28186:function(e,n,s){s.r(n);var o=s(52322),r=s(45392);function i(e){const n=Object.assign({h1:"h1",p:"p",code:"code",ul:"ul",li:"li",strong:"strong",h2:"h2",a:"a",pre:"pre",h3:"h3",ol:"ol",h4:"h4"},(0,r.ah)(),e.components);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h1,{children:"ESM and transpiling"}),"\n",(0,o.jsxs)(n.p,{children:["To support every modern front end environment, the ",(0,o.jsx)(n.code,{children:"@dnb/eufemia"})," supports different transpiled module formats:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"ESM"})," with ES5 (",(0,o.jsx)(n.strong,{children:"default"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"ES"})," with ES6"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"CJS"})," with ES5"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"UMD"})," with ES5"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{children:"Default module format"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"@dnb/eufemia"})," uses ",(0,o.jsx)(n.strong,{children:"ESM"})," as the default module format. This allows us to more easily and by default ",(0,o.jsx)(n.a,{href:"#tree-shaking",children:"tree shaking"})," support:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"// Imports only the code needed for the button\nimport { Button } from '@dnb/eufemia'\nimport { Button } from '@dnb/eufemia/es'\n\n// Imports only the code needed for icons\nimport { question } from '@dnb/eufemia/icons'\nimport { question } from '@dnb/eufemia/es/icons'\n"})}),"\n",(0,o.jsx)(n.h2,{children:"CommonJS (CJS)"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://nodejs.org/",children:"Node.js"})," uses ",(0,o.jsx)(n.a,{href:"https://requirejs.org",children:"RequireJS"})," and has ",(0,o.jsx)(n.a,{href:"https://requirejs.org/docs/commonjs.html",children:"CommonJS"})," as their default module format."]}),"\n",(0,o.jsx)(n.h3,{children:"SSR"}),"\n",(0,o.jsxs)(n.p,{children:["In case you are using the ",(0,o.jsx)(n.code,{children:"@dnb/eufemia"})," in a classic Node.js environment, like typical in SSR, you can import or require everything from the ",(0,o.jsx)(n.code,{children:"/cjs"})," subfolder:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"// Components\nimport { Button } from '@dnb/eufemia/cjs'\nconst { Button } = require('@dnb/eufemia/cjs/components')\nconst Button = require('@dnb/eufemia/cjs/components/Button')\n\n// Icons\nimport { question } from '@dnb/eufemia/cjs/icons'\nconst { question } = require('@dnb/eufemia/cjs/icons')\nconst question = require('@dnb/eufemia/cjs/icons/question')\n\n// Styles\nimport '@dnb/eufemia/cjs/style'\nrequire('@dnb/eufemia/cjs/style')\n"})}),"\n",(0,o.jsx)(n.h3,{children:"Next.js and Node.js version 12 and above"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"NB:"})," If you use Next.js with Node.js version 12 and above, we may have to define explicitly that we want to use CommonJS:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import { Button } from '@dnb/eufemia/cjs'\nconst { Button } = require('@dnb/eufemia/cjs/components')\n"})}),"\n",(0,o.jsxs)(n.p,{children:["Alternatively, you can make use of ",(0,o.jsx)(n.a,{href:"https://www.npmjs.com/package/next-transpile-modules",children:"next-transpile-modules"}),"."]}),"\n",(0,o.jsx)(n.h3,{children:"ESM in Node.js version 10"}),"\n",(0,o.jsxs)(n.p,{children:["You can easily use ",(0,o.jsx)(n.a,{href:"https://nodejs.org/api/esm.html",children:"ESM"})," in Node.js environment."]}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Install the ",(0,o.jsx)(n.code,{children:"esm"})," package: ",(0,o.jsx)(n.code,{children:"npm i esm -D"})]}),"\n",(0,o.jsxs)(n.li,{children:["Call Node with an environment variable: ",(0,o.jsx)(n.code,{children:"NODE_OPTIONS='-r esm' node ..."})]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'// package.json\n"start": "NODE_OPTIONS=\'-r esm\' next start ./src"\n'})}),"\n",(0,o.jsx)(n.h4,{children:"Jest and ESM (Node testing environments)"}),"\n",(0,o.jsxs)(n.p,{children:["Older Jest versions uses still CommonJS as the default module format. If you use the default ",(0,o.jsx)(n.code,{children:"@dnb/eufemia"})," imports, then you get a mismatch between ES module and CommonJS formats. To ensure that Jest transforms your code in to CSJ, you can use the following Jest configuration ",(0,o.jsx)(n.code,{children:"--moduleNameMapper"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'jest --moduleNameMapper \'{"@dnb/eufemia(.*)":"@dnb/eufemia/cjs$1"}\'\n'})}),"\n",(0,o.jsxs)(n.p,{children:["or in a ",(0,o.jsx)(n.code,{children:"jest.config.js"})," or ",(0,o.jsx)(n.code,{children:"jest.preset.js"})," file:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"  module.exports = {\n    ...\n    moduleNameMapper: { '@dnb/eufemia(.*)': '@dnb/eufemia/cjs$1' }\n  }\n"})}),"\n",(0,o.jsx)(n.h2,{children:"Pure ES6"}),"\n",(0,o.jsx)(n.p,{children:"In some cases you may want to import an ES6 version."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"// ES6 version of all Components\nimport { Button } from '@dnb/eufemia/es'\nimport { Button } from '@dnb/eufemia/es/components'\n\n// ES6 version of a single component\nimport Button from '@dnb/eufemia/es/components/Button'\n"})}),"\n",(0,o.jsx)(n.p,{children:"Make sure your environment has a production build with:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Tree Shaking"}),"\n",(0,o.jsx)(n.li,{children:"Minify and mangle the Output"}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["By default, ",(0,o.jsx)(n.a,{href:"https://webpack.js.org",children:"webpack v4"})," does this fine."]}),"\n",(0,o.jsx)(n.h2,{children:"Tree shaking"}),"\n",(0,o.jsxs)(n.p,{children:["To optimize the bundle size, we have several options. It also depends on what is used to make the bundle. Is ",(0,o.jsx)(n.a,{href:"https://webpack.js.org",children:"webpack"})," used, then you may read a ",(0,o.jsx)(n.a,{href:"https://webpack.js.org/guides/tree-shaking",children:"good guide on Tree Shaking"}),"."]}),"\n",(0,o.jsxs)(n.p,{children:["If you only need / import a few components, you may consider to import them directly, without named imports (",(0,o.jsx)(n.strong,{children:"ES5"}),"):"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import MyMaskedInput from '@dnb/eufemia/components/InputMasked'\nimport MyMaskedInput from '@dnb/eufemia/cjs/components/InputMasked'\n\n// or\nimport Input from '@dnb/eufemia/components/input-masked/InputMasked'\nimport Input from '@dnb/eufemia/cjs/components/input-masked/InputMasked'\n"})}),"\n",(0,o.jsxs)(n.p,{children:["... or as ",(0,o.jsx)(n.strong,{children:"ES6"})," imports:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import { InputMasked } from '@dnb/eufemia/es/components'\n"})})]})}n.default=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,r.ah)(),e.components);return n?(0,o.jsx)(n,Object.assign({},e,{children:(0,o.jsx)(i,e)})):i(e)}}}]);
//# sourceMappingURL=component---src-docs-uilib-usage-first-steps-module-formats-mdx-c1831b1ea97635a1bc4c.js.map