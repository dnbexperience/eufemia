/*
* Input theme
*
*/

@import '../../../../style/core/utilities.scss';

.dnb-input {
  --input-height: 2.5rem;
  --input-button-border-color: var(--input-border-color);
  --input-button-border-width: var(--input-border-width);
  // Default
  --input-border-radius: 0.5rem;
  --input-color: var(--sb-color-text);
  --input-border-color: var(--sb-color-gray-dark-2);
  --input-border-width: 0.0625rem;
  // Hover
  --input-border-color--hover: var(--sb-color-violet);
  --input-border-width--hover: 0.125rem;
  // Active
  --input-color--active: var(--sb-color-text);
  --input-border-radius--active: 1.5rem;
  --input-border-color--active: var(--sb-color-violet);
  --input-border-width--active: 0.0625rem;
  // Focus (keyboard)
  --input-border-color--focus: var(--focus-ring-color);
  --input-border-width--focus: 0.1875rem;
  // Disabled
  --input-border-color--disabled: var(--sb-color-gray);
  --input-border-width--disabled: 0.0625rem;

  &__shell {
    background-color: var(--color-white);
    transition: border-radius 0.25s ease-out;
    border: none;
    color: var(--input-color);
    @include fakeBorder(
      var(--input-border-color),
      var(--input-border-width),
      inset
    );
  }

  &__submit-element {
    .dnb-button--input-button {
      box-shadow: none;
      background-color: transparent;
    }
  }

  &__submit-button {
    &__button {
      color: var(--sb-color-violet);
    }
  }

  &__placeholder {
    color: var(--sb-color-gray-dark-3);
  }

  &[data-input-state='disabled'] {
    --input-border-color: var(--input-border-color--disabled);
    --input-border-width: var(--input-border-width--disabled);

    .dnb-input__shell {
      &,
      .dnb-icon,
      .dnb-input__placeholder {
        color: var(--sb-color-gray-dark-2);
      }

      -webkit-text-fill-color: currentcolor;

      background-color: var(--sb-color-gray-light);
    }
  }

  &__status--error {
    &:not([data-input-state='disabled']) {
      --input-border-color: var(--sb-color-red);
      --input-color: var(--sb-color-red);
      --input-color--active: var(--sb-color-text);
      --input-border-color--hover: var(--sb-color-red);
      --input-border-color--active: var(--sb-color-red);
      --input-border-color--focus: var(--sb-color-red);
    }
    html:not([data-whatintent='touch']) & {
      .dnb-input__submit-button__button.dnb-button--secondary:not(.dnb-button--has-text, [disabled]) {
        &:hover {
          background-color: var(--sb-color-red);
          color: var(--sb-color-white);
        }
        &:active {
          color: var(--sb-color-red);
          box-shadow: none;
          background-color: transparent;
        }
      }
      &[data-input-state='focus']
        .dnb-input__submit-button__button.dnb-button--secondary:not(.dnb-button--has-text, [disabled]) {
        --input-button-border-width: var(--focus-ring-width);
      }
    }
    .dnb-input__icon {
      color: var(--sb-color-red);
    }
  }

  &:not([data-input-state='disabled']) {
    // Focus
    &[data-input-state='focus'] {
      --input-button-border-color: var(--input-border-color--active);
      --input-button-border-width: var(--input-border-width);
      --input-color: var(--input-color--active);
      --input-border-radius: var(--input-border-radius--active);
      --input-border-color: var(--input-border-color--active);
      --input-border-width: var(--input-border-width--active);

      .dnb-input__shell {
        @include focusRing(
          null,
          var(--input-border-color--focus),
          inset
        ); // keyboard only
      }

      .dnb-input__submit-button__button {
        border-bottom-right-radius: var(--input-border-radius--active);
        border-top-right-radius: var(--input-border-radius--active);
      }
    }

    // Hover
    .dnb-input__shell:hover,
    .dnb-form-label:hover + .dnb-input__inner .dnb-input__shell {
      --input-button-border-color: var(--input-border-hover-active-color);
      --input-button-border-width: 0.125;
      --input-border-color: var(--input-border-color--hover);
      --input-border-width: var(--input-border-width--hover);
    }

    .dnb-input__submit-element .dnb-input__submit-button__button {
      box-shadow: none;
      border: var(--input-button-border-width) solid transparent;
      border-left: none;
      padding-left: var(--input-button-border-width);
      transition: border-radius 0.25s ease-out;
      background-color: transparent;

      &:hover {
        box-shadow: none;
        border-color: var(--input-button-border-color);
      }
      &:active {
        --border-color: transparent;
        background-color: transparent;
        color: var(--input-border-color--active);
      }
      &:focus:not(:hover) {
        --input-button-border-width: 0;
      }
    }
  }

  html[data-whatinput='keyboard'] &[data-input-state='focus'] {
    --input-button-border-color: var(--input-border-color--focus);
    --input-button-border-width: var(--focus-ring-width);
  }
}
