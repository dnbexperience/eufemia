/*
 * StepIndicator component
 *
 */

@import '../../../style/core/utilities.scss';

.dnb-step-indicator__sidebar {
  @media screen and (min-width: 50.1em) {
    max-width: 20rem;
    margin-right: var(--spacing-x-large);

    .dnb-step-indicator__item {
      min-width: 320px;
    }
  }

  // To avoid layout shift during SSR hydration
  // we hide the sidebar with skeleton on small screens
  &--ssr-skeleton {
    @media screen and (max-width: 50.1em) {
      visibility: hidden;
      overflow: hidden;
      width: 0;
      height: 5.5rem; // the height of the modal button + label + margin
    }
  }
}

.dnb-step-indicator-wrapper .dnb-step-indicator {
  &__list {
    display: flex;
    flex-direction: column;

    padding: 0;
    margin: 0;

    list-style: none;
  }

  &__trigger {
    // Is needed to make ensure the button stays on top during height animation
    display: flex;
    flex-direction: column;
  }

  &__trigger__button,
  &__item .dnb-button {
    overflow: hidden; // only needed when text is large and it overflows during animation (from small to large)

    .dnb-button__text {
      text-align: left;
    }

    &.dnb-button--has-icon .dnb-button__text {
      margin-right: 1rem;
    }

    .dnb-button__alignment {
      order: 2;
    }

    justify-content: space-between;
    border-radius: 0.25rem;

    will-change: height;
    transition: height 400ms var(--easing-default);

    html[data-visual-test] & {
      transition-duration: 1ms !important;
    }
  }
  &__trigger button#{&}__trigger__button {
    margin-top: 0.5rem;
  }

  &__item {
    margin-bottom: 1rem;

    &--current .dnb-button {
      font-weight: var(--step-indicator-button-font-weight);

      @include fakeBorder(
        var(--step-indicator-border-color),
        0.125rem,
        inset
      );
    }

    &--visited .dnb-button {
      background-color: var(--step-indicator-button-background-color);
    }

    &--inactive .dnb-button {
      cursor: text;
      pointer-events: initial;
      user-select: initial;

      &.dnb-button--secondary,
      &.dnb-button--secondary:hover,
      &.dnb-button--secondary:focus,
      &.dnb-button--secondary:active {
        color: var(--step-indicator-button-color--inactive);
        background-color: var(
          --step-indicator-button-background-color--inactive
        );

        @include fakeBorder(
          var(--step-indicator-button-border-color--inactive),
          0.0625rem,
          inset
        );
      }
    }

    &--inactive.dnb-step-indicator__item--current {
      .dnb-button {
        &.dnb-button--secondary,
        &.dnb-button--secondary:hover,
        &.dnb-button--secondary:focus,
        &.dnb-button--secondary:active {
          @include fakeBorder(
            var(--step-indicator-current-item-button-color--inactive),
            0.125rem,
            inset
          );
        }
      }
    }

    html[data-whatinput='keyboard']
      &__item--current
      .dnb-button:not([disabled], :active, :hover):focus {
      color: var(--step-indicator-current-item-button-color);
      background-color: var(
        --step-indicator-current-item-button-background-color
      );
    }

    .dnb-button__icon {
      opacity: 1;
      transition: opacity 1400ms ease-in-out;

      html[data-visual-test] & {
        transition-duration: 1ms !important;
      }
    }

    &:not(.dnb-step-indicator__item--visited)
      .dnb-button:not(.dnb-step-indicator__button__status)
      .dnb-button__icon {
      opacity: 0;
    }
  }

  &__item-content {
    display: flex;
    flex-wrap: nowrap;

    padding: 0.5rem 0;

    &__number {
      padding-right: 0.5rem;
      white-space: nowrap;
    }

    &__wrapper {
      display: flex;
      flex-direction: column;
    }
  }

  &__label,
  &__label.dnb-p {
    font-size: var(--step-indicator-label-font-size);
    margin-bottom: 0.5rem;
  }

  &__button__status {
    &.dnb-button--secondary {
      background-color: var(--step-indicator-status-background-color);
    }

    &--error.dnb-button--secondary {
      background-color: var(
        -step-indicator-status-background-color--error
      );
    }

    &--info.dnb-button--secondary {
      background-color: var(-step-indicator-status-background-color--info);
    }

    .dnb-button__icon {
      align-self: flex-start;
      margin-top: 1rem;
      margin-right: 0.75rem;
    }

    .dnb-step-indicator__item-content {
      &__number,
      &__status {
        font-weight: var(--step-indicator-status-font-weight);
      }

      &__status {
        margin-top: 0.5rem;

        font-size: var(--step-indicator-status-font-size);
        line-height: var(--step-indicator-status-line-height);
        color: var(--step-indicator-status-color);
      }
    }
  }
}
