/*
* Textarea component
*
*/

@import './themes/dnb-textarea-theme-ui.scss';

:root {
  --textarea-vertical-correction: 0.25rem; // for chromium browsers
  --textarea-padding-width: 0.5rem;
  --textarea-border-inner: 0 0 0 var(--textarea-padding-width)
    var(--color-white);
}

@mixin textareaStyleCommon() {
  padding: var(--textarea-padding-width);
  padding-top: calc(
    var(--textarea-padding-width) - var(--textarea-vertical-correction)
  );
  padding-bottom: var(--textarea-vertical-correction);

  line-height: 1.5rem;
}
@mixin textareaStyle() {
  display: block;
  margin: var(--textarea-padding-width);

  border: none;
  border-radius: 1px;

  @include textareaStyleCommon() box-shadow: var(--textarea-border-inner),
    0 0 0 calc(var(--textarea-padding-width) + 0.0625rem)
      var(--color-sea-green-alt);

  /* IE11 fix */
  @media screen and (-ms-high-contrast: active),
    (-ms-high-contrast: none) {
    -ms-overflow-style: -ms-autohiding-scrollba;
    box-shadow: 0 0 0 0.0625rem var(--color-sea-green-alt);
  }

  &.status--error,
  .dnb-textarea__status--error {
    box-shadow: var(--textarea-border-inner),
      0 0 0 calc(var(--textarea-padding-width) + 0.125rem)
        var(--color-cherry-red);
  }
  @include hover(true) {
    &:not(.status--error) {
      box-shadow: var(--textarea-border-inner),
        0 0 0 calc(var(--textarea-padding-width) + 0.125rem)
          var(--color-emerald-green);

      /* IE11 fix */
      @media screen and (-ms-high-contrast: active),
        (-ms-high-contrast: none) {
        box-shadow: 0 0 0 0.125rem var(--color-emerald-green);
      }
    }
  }
  &:focus {
    outline: none;
    box-shadow: var(--textarea-border-inner),
      0 0 0 calc(var(--textarea-padding-width) + 0.125rem)
        var(--color-emerald-green);

    /* IE11 fix */
    @media screen and (-ms-high-contrast: active),
      (-ms-high-contrast: none) {
      box-shadow: 0 0 0 0.125rem var(--color-emerald-green);
    }
  }
  &[disabled] {
    user-select: none;

    // color: var(--color-sea-green-alt-30);
    // background-color: var(--color-mint-green-12);
    box-shadow: 0 0 0 var(--textarea-padding-width)
        var(--color-mint-green-12),
      0 0 0 calc(var(--textarea-padding-width) + 0.0625rem)
        var(--color-sea-green-alt-30);

    &::-webkit-scrollbar {
      width: 0;
    }
  }
}

.dnb-textarea {
  display: block;

  &__shell {
    display: block;
    position: relative;
  }

  &__placeholder,
  &__textarea {
    text-align: left;
  }

  &__placeholder {
    pointer-events: none;

    position: absolute;
    z-index: 1;
    top: 0;
    left: var(--textarea-padding-width);

    overflow: hidden;
    width: 100%; // to get overflow working properly
    height: 100%; // to get overflow working properly

    @include textareaStyleCommon();
  }

  &__textarea {
    @include textareaStyle();
  }

  // > .dnb-form-status {
  //   margin-top: 0.5rem;
  // }

  // hide placeholder on focus
  &--has-content &__textarea ~ &__placeholder,
  &--focus &__textarea:not([disabled]):not([readonly]) ~ &__placeholder {
    opacity: 0.5;
  }
}

textarea.dnb-textarea {
  @include textareaStyle();
  @include textareaTheme();
  label + &[class*='__form-status'] {
    vertical-align: baseline;
  }
}

.dnb-form-group {
  // for vertical labeling
  &__position--vertical {
    // To fake, that we actuallyhave 8px between
    > .dnb-textarea {
      transform: translateY(2px);
    }
  }

  // for hoizontal labeling
  &,
  &__position--hoizontal {
    // To fake, that the first line is aligned with the label
    &:not(.dnb-form-group__position--vertical) {
      > .dnb-textarea {
        transform: translateY(
          calc(1px - 1px - var(--textarea-vertical-correction))
        );
        margin-top: 0;
        &:not(textarea) {
          margin-top: -0.5rem;
        }
      }
    }
  }
}
